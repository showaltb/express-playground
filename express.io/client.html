<!DOCTYPE html>
<html>
  <head>
    <script src="/javascripts/jquery.js"></script>
    <script src="/javascripts/underscore.js"></script>
    <script src="/socket.io/socket.io.js"></script>
  </head>
  <body>
    <h1>express.io sample</h1>

    <p>
    Received Messages
    <button id="clear">Clear</button>
    </p>
    <ul id="messages">
    </ul>

    <script>
      (function() {

        var socket = io.connect();

        // Listen for the talk event.
        socket.on('talk', function(data) {
          console.log(data);
          $('#messages').append('<li>' + _.escape(JSON.stringify(data.message)) + '</li>');
        });

        // Clear list on demand
        $('#clear').click(function (e) {
          e.preventDefault();
          $('#messages').empty();
        });

      })();

    </script>

  </body>
</html>
